#
# Recommended settings for debuggin either ecl_min or ecl.
#
delete break
break cl_cos
break cl_error
break cl_cerror
break CEerror
break FEerror
break FEunbound_variable
break FEundefined_function
break FEwrong_type_argument
break FEinvalid_function
set confirm off
handle SIGBUS nostop
handle EXC_BAD_ACCESS nostop pass noprint


macro define NIL (cl_symbols)
macro define T (cl_symbols+1)

define ecl_print
	set $cl_debug_stream = ecl_make_string_output_stream(4096, 0)

	#set $cl_debug_void = ecl_princ( $arg0, $cl_debug_stream)
	#print $cl_debug_stream->stream.object0->base_string.self
	#set $cl_debug_stream->stream.object0->base_string.fillp = 0

	set $cl_debug_imm = 3 & (long)x
	print (cl_type)($cl_debug_imm ? $cl_debug_imm : x->d.t)

	set $cl_debug_void = si_write_ugly_object( $arg0, $cl_debug_stream)
	print $cl_debug_stream->stream.object0->base_string.self
end
